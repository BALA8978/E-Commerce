<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Rate & Review - MyCart</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #fff5e6, #ffffff);
      margin: 0;
      padding: 20px;
    }

    .container {
      max-width: 700px;
      margin: auto;
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
    }

    h2 {
      text-align: center;
      color: #ff9800;
    }

    .product {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }

    .product img {
      width: 70px;
      height: 70px;
      object-fit: cover;
      border-radius: 10px;
      margin-right: 15px;
    }

    .stars {
      margin: 10px 0;
    }

    .star {
      font-size: 28px;
      color: #ccc;
      cursor: pointer;
    }

    .star.selected {
      color: #ff9800;
    }

    textarea {
      width: 100%;
      height: 100px;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 15px;
      margin-top: 10px;
    }

    button {
      display: block;
      width: 100%;
      padding: 12px;
      margin-top: 20px;
      background: #ff9800;
      border: none;
      color: white;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
    }

    button:hover {
      background: #e68900;
    }

    .thank-you {
      display: none;
      text-align: center;
      margin-top: 30px;
      color: #155724;
      background-color: #d4edda;
      padding: 20px;
      border-radius: 10px;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>‚≠ê Rate & Review Your Product</h2>

  <div class="product" id="product-section">
    <!-- Product Info will be injected here -->
  </div>

  <div class="stars" id="star-rating">
    <span class="star" onclick="selectRating(1)">‚òÖ</span>
    <span class="star" onclick="selectRating(2)">‚òÖ</span>
    <span class="star" onclick="selectRating(3)">‚òÖ</span>
    <span class="star" onclick="selectRating(4)">‚òÖ</span>
    <span class="star" onclick="selectRating(5)">‚òÖ</span>
  </div>

  <textarea id="reviewText" placeholder="Write your experience with the product..."></textarea>
  <button onclick="submitReview()">Submit Review</button>

  <div class="thank-you" id="thank-you-message">
    üéâ Thank you for your review!
  </div>
</div>

<script>
  let selectedRating = 0;

  // Load product info from localStorage
  const orderDetails = JSON.parse(localStorage.getItem("orderDetails"));
  const productSection = document.getElementById("product-section");

  if (orderDetails && orderDetails.products.length > 0) {
    const item = orderDetails.products[0]; // Review first item
    productSection.innerHTML = `
      <img src="${item.image}" alt="${item.name}">
      <div>
        <strong>${item.name}</strong><br>
        ‚Çπ${item.price} √ó ${item.quantity}
      </div>
    `;
  } else {
    productSection.innerHTML = "<p>No product found to review.</p>";
  }

  function selectRating(stars) {
    selectedRating = stars;
    const starsEl = document.querySelectorAll(".star");
    starsEl.forEach((star, index) => {
      star.classList.toggle("selected", index < stars);
    });
  }

  function submitReview() {
    const reviewText = document.getElementById("reviewText").value.trim();

    if (selectedRating === 0) {
      alert("Please select a rating.");
      return;
    }

    if (!reviewText) {
      alert("Please write your review.");
      return;
    }

    // Save to localStorage (or send to backend if applicable)
    const review = {
      product: orderDetails.products[0].name,
      rating: selectedRating,
      text: reviewText,
      date: new Date().toLocaleString()
    };

    const allReviews = JSON.parse(localStorage.getItem("reviews")) || [];
    allReviews.push(review);
    localStorage.setItem("reviews", JSON.stringify(allReviews));

    // Show thank you message
    document.getElementById("thank-you-message").style.display = "block";
    document.querySelector("button").disabled = true;
  }
</script>

</body>
</html>
