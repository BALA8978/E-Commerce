<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Track Order - MyCart</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom right, #f3e8ff, #ffffff);
      margin: 0;
      padding: 20px;
    }

    .container {
      max-width: 900px;
      margin: auto;
      background: #fff;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }

    h2 {
      text-align: center;
      color: #6a0dad;
    }

    .section {
      margin-top: 30px;
    }

    .section h3 {
      color: #444;
      margin-bottom: 10px;
      border-bottom: 1px solid #ddd;
      padding-bottom: 5px;
    }

    .order-info p, .customer-info p {
      margin: 5px 0;
    }

    .product {
      display: flex;
      align-items: center;
      border-bottom: 1px solid #eee;
      padding: 10px 0;
    }

    .product img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 8px;
      margin-right: 15px;
    }

    .product-details {
      flex: 1;
    }

    .status {
      margin: 30px 0;
      display: flex;
      justify-content: space-between;
      text-align: center;
    }

    .status-step {
      flex: 1;
      position: relative;
    }

    .status-step::after {
      content: '';
      position: absolute;
      top: 20px;
      right: -50%;
      height: 4px;
      width: 100%;
      background: #ddd;
      z-index: 0;
    }

    .status-step:last-child::after {
      display: none;
    }

    .status-circle {
      width: 30px;
      height: 30px;
      background: #6a0dad;
      color: white;
      border-radius: 50%;
      margin: 0 auto 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1;
      position: relative;
    }

    .status-text {
      font-size: 12px;
    }

    .btn-review {
      display: none;
      margin: 30px auto 0;
      padding: 12px 25px;
      background: #ff9800;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }

    .btn-review:hover {
      background: #e68a00;
    }
  </style>
</head>
<body>

<div class="container">
  <h2>ðŸ“¦ Track Your Order</h2>

  <div class="section order-info">
    <h3>Order Info</h3>
    <p><strong>Order ID:</strong> <span id="order-id">Loading...</span></p>
    <p><strong>Payment:</strong> <span id="payment-method"></span></p>
  </div>

  <div class="section customer-info">
    <h3>Shipping Address</h3>
    <p><span id="customer-name"></span></p>
    <p><span id="address"></span></p>
    <p><span id="phone"></span></p>
  </div>

  <div class="section">
    <h3>Items Ordered</h3>
    <div id="product-list"></div>
  </div>

  <div class="section">
    <h3>Order Status</h3>
    <div class="status">
      <div class="status-step">
        <div class="status-circle">1</div>
        <div class="status-text">Confirmed</div>
      </div>
      <div class="status-step">
        <div class="status-circle">2</div>
        <div class="status-text">Packed</div>
      </div>
      <div class="status-step">
        <div class="status-circle">3</div>
        <div class="status-text">Shipped</div>
      </div>
      <div class="status-step">
        <div class="status-circle">4</div>
        <div class="status-text">Out for Delivery</div>
      </div>
      <div class="status-step">
        <div class="status-circle" style="background: green;">5</div>
        <div class="status-text">Delivered</div>
      </div>
    </div>
  </div>

  <button class="btn-review" id="reviewBtn" onclick="goToReview()">Rate & Review</button>
</div>

<script>
  const orderDetails = JSON.parse(localStorage.getItem("orderDetails"));

  if (!orderDetails) {
    alert("No order found.");
    window.location.href = "index.html";
  } else {
    document.getElementById("order-id").textContent = orderDetails.orderId;
    document.getElementById("payment-method").textContent = orderDetails.paymentMethod;
    document.getElementById("customer-name").textContent = orderDetails.customer.name;
    document.getElementById("address").textContent =
      `${orderDetails.customer.house}, ${orderDetails.customer.street}, ${orderDetails.customer.city}, ${orderDetails.customer.state} - ${orderDetails.customer.pincode}`;
    document.getElementById("phone").textContent = "ðŸ“ž " + orderDetails.customer.phone;

    const list = document.getElementById("product-list");
    orderDetails.products.forEach(item => {
      const div = document.createElement("div");
      div.classList.add("product");
      div.innerHTML = `
        <img src="${item.image}" alt="${item.name}">
        <div class="product-details">
          <strong>${item.name}</strong><br>
          â‚¹${item.price} Ã— ${item.quantity}
        </div>
        <div>â‚¹${item.price * item.quantity}</div>
      `;
      list.appendChild(div);
    });

    // If status is delivered, show review button (mock logic)
    const isDelivered = true; // You can change this to dynamic logic later
    if (isDelivered) {
      document.getElementById("reviewBtn").style.display = "block";
    }
  }

  function goToReview() {
    window.location.href = "review.html";
  }
</script>

</body>
</html>
